<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Upgrading to CodeIgniter 2.0 | Phil Sturgeon</title>
  <meta name="description" content="I used to contribute to the PHP-FIG, The League of Extraordinary Packages, PHP The Right Way, CodeIgniter, FuelPHP, PyroCMS and a bunch of other stuff, but I gave it all up to join the circus" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link href="/stylesheets/main.css" rel="stylesheet" media="screen" />
  <link href="/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href="/images/favicon.png" rel="icon" type="image/png" />

  <meta property="og:title" content="Upgrading to CodeIgniter 2.0" />
  <meta property="og:type" content="article" />
  <meta property="article:author" content="Phil Sturgeon" />
  <meta property="og:description" content="As soon as I saw the tweet from EllisLab that CodeIgniter 2.0-dev was available on BitBucket I instantly converted PyroCMS to run on it. I got it all working in a few hours after LOTS of headbanging, mouse throwing and blaspheming. All the bugs I found along the way have since been fixed in the 2.0 branch by the Ellis developers or myself." />
  <meta property="og:site_name" content="Phil Sturgeon" />
  <meta property="og:image" content="https://philsturgeon.uk/images/author.jpg" />
  <meta property="og:url" content="https://philsturgeon.uk/codeigniter/2010/05/05/upgrading-to-codeigniter-2.0/" />
  <meta property="og:locale" content="en_GB" />
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@philsturgeon">
  <meta name="twitter:title" content="Upgrading to CodeIgniter 2.0 | Phil Sturgeon">
  <meta name="twitter:image:src" content="https://philsturgeon.uk/images/author.jpg">
  <meta name="twitter:url" content="https://philsturgeon.uk/codeigniter/2010/05/05/upgrading-to-codeigniter-2.0/">
  <meta name="twitter:description" content="As soon as I saw the tweet from EllisLab that CodeIgniter 2.0-dev was available on BitBucket I instantly converted PyroCMS to run on it. I got it all working in a few hours after LOTS of headbanging, mouse throwing and blaspheming. All the bugs I found along the way have since been fixed in the 2.0 branch by the Ellis developers or myself.">
  <meta name="twitter:creator" content="@philsturgeon">
  
  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
</head>


  <body>

    <a class='fa fa-home logo-readium' href='/'></a>


    <!-- content start -->

    <main class="content" role="main">
      <article class="post">
        <div class="noarticleimage">
          <div class="post-meta">
            <h1 class="post-title">Upgrading to CodeIgniter 2.0</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/images/author.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person">Phil Sturgeon</h4>
              on
              <time datetime="2010-05-05 23:31:00 UTC">
                May  5 2010
              </time>
            </div>
          </div>
        </div>
        <br>
        <br>
        <br>
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p>As soon as I saw the tweet from EllisLab that <a href="http://bitbucket.org/ellislab/codeigniter/">CodeIgniter 2.0-dev</a> was available on BitBucket I instantly converted <a href="http://pyrocms.com/">PyroCMS</a> to run on it. I got it all working in a few hours after LOTS of headbanging, mouse throwing and blaspheming. All the bugs I found along the way have since been fixed in the 2.0 branch by the Ellis developers or myself.</p>

<p>While this does not mean everything is running perfectly, at the time of writing all the worrying bugs are squashed so it should be safe for us to have a play.</p>

<h3 id="grab-those-new-files">Grab those new files</h3>

<p><a href="http://bitbucket.org/ellislab/codeigniter/get/tip.zip">Download</a> the new files from BitBucket.</p>

<h3 id="what-goes-where">What goes where</h3>

<p>Slight change in the folder structure for some of you, the application/ folder and the system/ folder now sit next to each other.</p>

<p>So move your application folder up one level to sit next to system/ then delete that system/ folder. That has killed off CodeIgniter 1.7.2. Bye!</p>

<p>Now you need to copy the new downloaded system/ folder to the empty gap where the old one was.</p>

<p>Sadly that is not entirely it. You must also copy the following files from the new download to your installation:</p>

<ul>
  <li>index.php</li>
  <li>application/config/foreign_chars.php</li>
  <li>application/config/profiler.php</li>
</ul>

<h3 id="noticed-that-your-controllers-and-models-are-broked">Noticed that your controllers and models are broked?</h3>

<p>CodeIgniter Controllers and Models used to be defined extend like this:</p>

<pre class="highlight plaintext"><code>class Blog_model extends Model
</code></pre>

<p>Now in CodeIgniter 2.0 you write:</p>

<pre class="highlight plaintext"><code>class Blog_model extends CI_Model
</code></pre>

<p>_ <strong>Update 10/11/2010:</strong> Remember to do this for Controllers too. Instead of Foo extends Controller, you must now write Foo extends CI_Controller and all parent::Controller() calls must be changed to parent::__construct()!_</p>

<p>Let’s not argue about why, what, who, where, when, the fact is you have to do this. It can be achieved with some simple Find &amp; Replace over your folder if your IDE/Text editor will allow it. For most applications (especially ones built primarily during the 1.7.x era) you are nearly there now. Unless you use plugins or the old Validation class…</p>

<h3 id="oh-shit-i-use-plugins">Oh shit, I use plugins!</h3>

<p>Well not any more you don’t. Plugins are dead and gone so you need to convert them to be <a href="http://codeigniter.com/user_guide/general/helpers.html">Helpers</a>. Move them to the application/helpers and rename from “whatever_pi.php” to “whatever_helper.php”. Theoretically there is more to what should be a plugin or helper than the name of the file but TBH they will work like this so who gives a damn at this stage?</p>

<p>Make sure you have moved any array values in application/config/autoload.php from $autoload[‘plugins’] to $autoload[‘helpers’] or you will notice stuff break.</p>

<h3 id="validation-is-no-more">Validation is no more</h3>

<p>You all had fair warning, it has been deprecated for several versions and now it is gone completely. You can:</p>

<blockquote>
  <p>A.) Move to using the new <a href="http://codeigniter.com/user_guide/libraries/form_validation.html">Form Validation class</a>.</p>

  <p>B.) Grab the old <a href="http://bitbucket.org/ellislab/codeigniter/raw/3b6f3beea126/system/libraries/Validation.php">Validation.php</a> class and put it in your application/libraries/ folder.</p>

  <p>C.) Whine like a little girl on the <a href="http://codeigniter.com/forums/">forums</a>.
### Strange change to $config[‘permitted_uri_chars’]</p>
</blockquote>

<p>I had to change “a-z 0-9~%.:_-“ to “a-z 0-9~%.:_-“ in my application/config/config.php. Notice the backslash () before the hyphen (-).</p>

<h3 id="modular-separation--modular-extensions">Modular Separation / Modular Extensions</h3>

<p>Out of the box Modular Separation won’t work with CodeIgniter 2.0. Good thing I picked up the project and released a patch then huh? Grab the latest version in the 2.x branch from the <a href="http://codeigniter.com/wiki/Modular_Separation">Modular Separation Wiki</a>.</p>

<p><em>Update 12/10/2010: Modular Separation has been merged back into Modular Extensions so they are now the same project. I wrote <a href="/blog/2010/09/what-happened-to-modular-separation">a post explaining the merge</a> which details the differences and explains how to upgrade.</em></p>

<h3 id="mycontroller-and-other-extended-libs">MY_Controller and other extended libs</h3>

<p>A new /system/core/ folder has been created for some libraries considered more core than others such as Router, Loader and Controller. If you extend any library that has now moved to /system/core/ you must now place it in /application/core/.</p>

<h3 id="cilanguage-has-a-new-name">CI_Language has a new name</h3>

<p>The core library CI_Language has been renamed to CI_Lang. For 80% of apps this will mean nothing at all. If you reference the library or extend it then you will of course need to rename this.</p>

<h3 id="deprecated-db-methods-removed">Deprecated DB methods removed</h3>

<p>After being deprecated since 1.6.x we finally see the back of the DB methods orwhere, orlike, groupby, orhaving, orderby and getwhere. They should now be or_where, or_like, group_by, or_having, order_by and get_where which is just a few more find/replace changes to run on your projects.</p>

<h3 id="disable-query-strings-or-expect-weirdness">Disable query strings or expect weirdness</h3>

<p>This didn’t happen in previous CodeIgniter versions but in 2.0 if you enable $config[‘enable_query_strings’] it will now generate links like http://example.php/index.php?/controller, or http://example.php/?/controller. You need to set enable_query_strings to false which will disable GET support. You can re-enable that with a MY_Controller or hook that runs:</p>

<pre class="highlight plaintext"><code>parse_str($_SERVER['QUERY_STRING'], $_GET);
</code></pre>

<h3 id="summary">Summary</h3>

<p>That should be it! Up and running on CodeIgniter 2.0. Most of you won’t need to have bothered with all the steps but they are worth keeping in mind for the future. If you spot anything I have missed please pester me in one of the usual ways.</p>

        </section>
        <footer class="post-footer">
            <section class="share">
                  <a class="icon-twitter" href="https://twitter.com/share?text=Upgrading to CodeIgniter 2.0&amp;url=https://philsturgeon.uk/codeigniter/2010/05/05/upgrading-to-codeigniter-2.0/"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                  <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                  </a>
                  <a class="icon-facebook" href="https://www.facebook.com/sharer.php?t=Upgrading to CodeIgniter 2.0&amp;u=https://philsturgeon.uk/codeigniter/2010/05/05/upgrading-to-codeigniter-2.0/"
                    onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
                  <i class="fa fa-facebook"></i><span class="hidden">facebook</span>
                  </a>
            </section>
            <section class="post-next-previous">
                <p>
                    Previous:
                    <a class="button" href="/php/2010/04/28/tiny-rest-framework/">Tiny REST framework in PHP</a>
                </p>
                <p style="float:right">
                    Next: 
                    <a class="button" href="/codeigniter/2010/05/11/cloudigniter-hosting-for-codeigniter/">CloudIgniter: Easy hosting for CodeIgniter</a>
                </p>
            </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="more isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/images/author.jpg)">Blog Logo</div>
              <h4>Phil Sturgeon</h4>
              <p class="bio">I spend a lot of time urging people to learn more languages, and if that is a bit much learn another framework. Rails and Laravel are the same, and Go is a barrel of laughs.</p>
              <p>Get out of your rut.</p>
            </section>
          </div>
          <div class="more isRight">
            <h5 class="index-headline featured"><span>More Writing</span></h5>
            <section class="author">
              <a href="http://apisyouwonthate.com/">
                <div class="book-image build-apis">Book Cover</div>
                <h4>Build APIs You Won't Hate</h4>
              </a>
              <p class="bio">Everyone and their dog wants an API, so you should probably learn how to build them.</p>
              <p><a href="http://apisyouwonthate.com/">Buy it from LeanPub or Amazon</a>.</p>
            </section>
          </div>
        </div>
      </article>

      <div id="disqus_thread"></div>
      <script type="text/javascript">
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'philsturgeon';

          var disqus_identifier = 'upgrading-to-codeigniter-2.0';

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </main>
    <div class="bottom-closer">
      <div class="background-closer-image" style="background-image: url(/images/ciderphpants.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Phil Sturgeon</h1>
        <h2 class="blog-description">I used to contribute to the PHP-FIG, The League of Extraordinary Packages, PHP The Right Way, CodeIgniter, FuelPHP, PyroCMS and a bunch of other stuff, but I gave it all up to join the circus</h2>
        <a href="/" class="btn">Back to Overview</a>
      </div>
    </div>

    <!-- content end -->

    <footer class='footer' role='contentinfo'>
  <div class='footer-links'>
    <ul class='context'>
      <li>
        <h3>Content</h3>
      </li>
      <li>
        <a href='/about'>About</a>
      </li>
      <li>
        <a href='/books'>Books</a>
      </li>
    </ul>
    <ul class='follow'>
      <li>
        <h3>Follow Me</h3>
      </li>
      <li>
        <a href='https://twitter.com/philsturgeon'>Twitter</a>
      </li>
      <li>
        <a href='https://github.com/'>GitHub</a>
      </li>
      <li>
        <a href='http://phptownhall.com/'>PHP Town Hall</a>
      </li>
    </ul>
    <ul class='recent_posts'>
      <li>
        <h3>Recent Posts</h3>
        <ul>
          <li><a href="/http/2015/09/03/auto-incrementing-to-destruction/">Auto-Incrementing IDs: Giving your Data Away</a></li>
          <li><a href="/charity/2015/08/22/no-booze/">No Booze for a Month</a></li>
          <li><a href="/feminism/2015/08/17/women-speaker-ratio-conversation-loop/">The Ratio of Women Speakers in Tech</a></li>
        </ul>
      </li>
    </ul>
  </div>
</footer>

    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="/javascripts/jquery.fitvids.js"></script>
<script src="/javascripts/index.js"></script>
<script src="/javascripts/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    $window.on('scroll', function() {
      var top = $window.scrollTop();

      if (top < 0 || top > 1500) { return; }
      $image
        .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
        .css('opacity', 1-Math.max(top/700, 0));
    });
    $window.trigger('scroll');

    var height = $('.article-image').height();
    $('.post-content').css('padding-top', height + 'px');

    $('a[href*=#]:not([href=#])').click(function() {
      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
       && location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
        if (target.length) {
          $('html,body').animate({ scrollTop: target.offset().top }, 500);
          return false;
        }
      }
    });
  });
}(jQuery));
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-8523256-1', 'auto');
  ga('send', 'pageview');

</script>


  </body>

</html>
