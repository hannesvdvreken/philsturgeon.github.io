<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Package Watch: Image Management | Phil Sturgeon</title>
  <meta name="description" content="I used to contribute to the PHP-FIG, The League of Extraordinary Packages, PHP The Right Way, CodeIgniter, FuelPHP, PyroCMS and a bunch of other stuff, but I gave it all up to join the circus" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link href="/stylesheets/main.css" rel="stylesheet" media="screen" />
  <link href="/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href="/images/favicon.png" rel="icon" type="image/png" />

  <meta property="og:name" content="Phil Sturgeon">
  <meta property="og:image" content="https://philsturgeon.uk/images/author.jpg">
  <meta property="og:description" content="Sorry if I sound like a broken record, but packages are f**king brilliant. I’ve mentioned before that packages are the future of PHP and plenty of other developers are thinking the same thing.">
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@philsturgeon">
  <meta name="twitter:title" content="Package Watch: Image Management | Phil Sturgeon">
  <meta name="twitter:creator" content="@philsturgeon">
  <meta name="twitter:image:src" content="https://philsturgeon.uk/images/author.jpg">
  <meta name="twitter:url" content="https://philsturgeon.uk/php/2012/09/19/package-watch-image-management/">
  <meta name="twitter:description" content="Sorry if I sound like a broken record, but packages are f**king brilliant. I’ve mentioned before that packages are the future of PHP and plenty of other developers are thinking the same thing.">
  
  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
</head>


  <body>

    <a class='fa fa-home logo-readium' href='/'></a>


    <!-- content start -->

    <main class="content" role="main">
      <article class="post">
        <div class="noarticleimage">
          <div class="post-meta">
            <h1 class="post-title">Package Watch: Image Management</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/images/author.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person">Phil Sturgeon</h4>
              on
              <time datetime="2012-09-19 07:19:00 UTC">
                Sep 19 2012
              </time>
            </div>
          </div>
        </div>
        <br>
        <br>
        <br>
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p>Sorry if I sound like a broken record, but packages are f**king brilliant. I’ve mentioned before that <a href="/blog/2012/03/packages-the-way-forward-for-php">packages are the future of PHP</a> and plenty of <a href="http://www.bradleyproctor.com/composer-the-future-of-php/">other developers</a> are <a href="http://blog.fortrabbit.com/handle-your-dependencies-with-php-composer/">thinking the same thing</a>.</p>

<p>For years I was locked into using the same frameworks for everything, mainly because my clients were hiring me specifically to use CodeIgniter based on my reputation within the community.</p>

<p>Now that is not the case and I can build things however I damn well like, so I am doing it <em>properly</em> and that is using Composer.</p>

<h2 id="no-framework">No Framework?</h2>

<p>Any project needs some sort of base; something needs to handle your HTTP requests, route them to a callback, or a controller, or something.</p>

<p>This is one of the most basic objectives of a framework, and really it should be one of it’s primary concerns. I could write all of this myself, but I have more interesting things to do so I needed to pick a framework.</p>

<p>If this was an API I would have used Slim or Silex, but this project needed a lot of CRUD, form validation and database interaction so I decided to use something that had a lot of that already: Laravel 4.</p>

<h2 id="why-laravel-4">Why Laravel 4?</h2>

<p>Taylor Otwell gets PSR packages. Laravel 4 is entirely built on top of Composer. The validation, sessions, database (Query Builder and Eloquent ORM), routing, etc are ALL Composer packages so I can pick and chose the bits that I need.</p>

<p>It makes the choice of framework considerably less important, because I can use the Laravel ORM with… anything.</p>

<h2 id="but-x-framework-doesnt-do-y">But X framework doesn’t do Y</h2>

<p>A PHP framework should focus its attention on its core responsibilities, like routing, request, response, sessions, views, etc and NOT on random edge-case stuff. Much like the CodeIgniter Cart library which I want to see <a href="https://github.com/EllisLab/CodeIgniter/issues/214">killed off</a>, ORM’s or even in this case image management.</p>

<p>Laravel 4 doesn’t handle it, so I had to use some extra packages.</p>

<h2 id="image-uploads--management">Image Uploads &amp; Management</h2>

<p>To get this extra functionality I added two packages to my composer.json:</p>

<script src="https://gist.github.com/3748717.js?file=full composer.json"></script>

<p>The first is <a href="https://github.com/codeguy/Upload">Upload</a> by <a href="https://www.joshlockhart.com/">Josh Lockhart</a> (who built <a href="https://github.com/codeguy/slim">Slim</a> and started <a href="http://www.phptherightway.com/">PHP The Right Way</a>). It’s currently very basic as it’s not been alive long, but for the job I needed to do it worked perfectly:</p>

<script src="https://gist.github.com/3748717.js?file=upload"></script>

<p>Perfect. It’s helped me validate size and mime-type with much less boilerplate code than native PHP would have required. This same package will work anywhere, and soon enough it will have other storage drivers so  this file can go straight to S3 when I hit upload. Nice.</p>

<p>Moving on, one it’s uploaded I want to resize it and add a watermark to the corner. Erf, ok so getimagesize() then check if the height or width is larger, then try to resize in ratio if its bigger than a certain size, then add a new image by calculating the size of the new image, minus 10 pixels to offset it and… IM SO BORED ALREADY!</p>

<p>Let’s use a package:</p>

<script src="https://gist.github.com/3748717.js?file=watermark"></script>

<p>Phew, I almost had to think for a minute there. Thanks <a href="https://github.com/Sybio">Clément Guillemain</a>.</p>

<p>The think I love is that all of these packages fit into my application perfectly, and there is no “I wonder if they’ve updated recently, I’d better go back to their blog and check to see”. Even more recently with GitHub managing all of those as Git submodules would have been a ballache.</p>

<p>Here is my entire composer.json for this project:</p>

<script src="https://gist.github.com/3748717.js?file=composer.json"></script>

<p>Easy right?</p>

<h2 id="final-thoughts">Final Thoughts</h2>

<p>I know it’s early days but this is PHP renaissance. People are building an <a href="https://github.com/adrianmacneil/tala-payments">ActiveMerchant port</a> (payment with 12+ gateways that will work perfectly in any framework), Alex Bilbie is combining all of our OAuth 2 client and server logic for CodeIgniter and FuelPHP to make one <strong>epic</strong> OAuth 2 package that will do everything, there are <a href="https://github.com/CHH/pipe">Asset pipelines</a>, <a href="https://github.com/nategood/commando">command line controllers</a>, <a href="https://github.com/tedivm/Fetch">IMAP inbox readers</a>, and all sorts of crazy and useful things.</p>

<p>Start using Composer on your next project and say “fuck you” to the frameworks that lock you in. If you spend all your time using that one framework, you’ll have a horrible time using a different one. If you use packages you can take them with you to whatever framework you use for the next project. That reduces time wasted re-learning how YetAnotherORM works, or how YET ANOTHER ASSET LIBRARY works, helps reduce wasted code, help reduce bullshit tribalism in framework users, and helps PHP move forward as an ecosystem.</p>


        </section>
        <footer class="post-footer">
            <section class="share">
                  <a class="icon-twitter" href="https://twitter.com/share?text=Package Watch: Image Management&amp;url=https://philsturgeon.uk/php/2012/09/19/package-watch-image-management/"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                  <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                  </a>
                  <a class="icon-facebook" href="https://www.facebook.com/sharer.php?t=Package Watch: Image Management&amp;u=https://philsturgeon.uk/php/2012/09/19/package-watch-image-management/"
                    onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
                  <i class="fa fa-facebook"></i><span class="hidden">facebook</span>
                  </a>
            </section>
            <section class="post-next-previous">
                <p>
                    Previous:
                    <a class="button" href="/2012/09/18/no-db-content-management-systems/">No-DB Content Management Systems</a>
                </p>
                <p style="float:right">
                    Next: 
                    <a class="button" href="/php/2012/10/03/cloud-hosting-php-pipe-dream/">Cloud Hosting for PHP: The Eternal Pipe Dream</a>
                </p>
            </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/images/author.jpg)">Blog Logo</div>
              <h4>Phil Sturgeon</h4>
              <p class="bio">Phil has contributed to CodeIgniter, FuelPHP, Laravel and handfuls of other projects, to try and make the PHP community a better place.</p>
              <hr>
              <p class="published">Published <time datetime="2012-09-19 07:19:00 UTC">Sep 19 2012</time></p>
            </section>
          </div>
          <div class="isRight">
            <h5 class="index-headline featured"><span>More Writing</span></h5>
            <footer class="site-footer">
              <h4>Build APIs You Won't Hate</h4>
              <p>Everyone and their dog wants an API, so you should probably learn how to build them.</p>
              <p><a href="http://apisyouwonthate.com/">Buy it from LeanPub or Amazon</a></p>
              <hr>
              <p class="published">Published 01 Feb 2014</p>
            </footer>
          </div>
        </div>
      </article>

      <div id="disqus_thread"></div>
      <script type="text/javascript">
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'philsturgeon';

          var disqus_identifier = 'package-watch-image-management';

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </main>
    <div class="bottom-closer">
      <div class="background-closer-image" style="background-image: url(/images/ciderphpants.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Phil Sturgeon</h1>
        <h2 class="blog-description">I used to contribute to the PHP-FIG, The League of Extraordinary Packages, PHP The Right Way, CodeIgniter, FuelPHP, PyroCMS and a bunch of other stuff, but I gave it all up to join the circus</h2>
        <a href="/" class="btn">Back to Overview</a>
      </div>
    </div>

    <!-- content end -->

    <footer class='footer' role='contentinfo'>
  <div class='footer-links'>
    <ul class='context'>
      <li>
        <h3>Content</h3>
      </li>
      <li>
        <a href='/about'>About</a>
      </li>
      <li>
        <a href='/books'>Books</a>
      </li>
    </ul>
    <ul class='follow'>
      <li>
        <h3>Follow Me</h3>
      </li>
      <li>
        <a href='https://twitter.com/philsturgeon'>Twitter</a>
      </li>
      <li>
        <a href='https://github.com/'>GitHub</a>
      </li>
      <li>
        <a href='http://phptownhall.com/'>PHP Town Hall</a>
      </li>
    </ul>
    <ul class='recent_posts'>
      <li>
        <h3>Recent Posts</h3>
        <ul>
          <li><a href="/http/2015/09/03/auto-incrementing-to-destruction/">Auto-Incrementing IDs: Giving your Data Away</a></li>
          <li><a href="/charity/2015/08/20/no-booze/">No Booze for a Month</a></li>
          <li><a href="/feminism/2015/08/17/women-speaker-ratio-conversation-loop/">The Ratio of Women Speakers in Tech</a></li>
        </ul>
      </li>
    </ul>
  </div>
</footer>

    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="/javascripts/jquery.fitvids.js"></script>
<script src="/javascripts/index.js"></script>
<script src="/javascripts/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    $window.on('scroll', function() {
      var top = $window.scrollTop();

      if (top < 0 || top > 1500) { return; }
      $image
        .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
        .css('opacity', 1-Math.max(top/700, 0));
    });
    $window.trigger('scroll');

    var height = $('.article-image').height();
    $('.post-content').css('padding-top', height + 'px');

    $('a[href*=#]:not([href=#])').click(function() {
      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
       && location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
        if (target.length) {
          $('html,body').animate({ scrollTop: target.offset().top }, 500);
          return false;
        }
      }
    });
  });
}(jQuery));
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-8523256-1', 'auto');
  ga('send', 'pageview');

</script>


  </body>

</html>
