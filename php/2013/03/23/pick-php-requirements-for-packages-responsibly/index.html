<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Pick PHP Requirements for Packages Responsibly | Phil Sturgeon</title>
  <meta name="description" content="I used to contribute to the PHP-FIG, The League of Extraordinary Packages, PHP The Right Way, CodeIgniter, FuelPHP, PyroCMS and a bunch of other stuff, but I gave it all up to join the circus" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link href="/stylesheets/main.css" rel="stylesheet" media="screen" />
  <link href="/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href="/images/favicon.png" rel="icon" type="image/png" />

  <meta property="og:title" content="Pick PHP Requirements for Packages Responsibly" />
  <meta property="og:type" content="article" />
  <meta property="article:author" content="Phil Sturgeon" />
  <meta property="og:description" content="Which version of PHP to use for anything is always much debated in the PHP community. I&#x27;m luck enough to have kissed sweet goodbye to PHP 5.2 a while back, but PHP 5.4 and PHP 5.3 are both actively used by different projects and recently I have come across a few packages that have been using PHP 5.4 almost exclusively just to use short array syntax, which to me is short sighted and selfish. I tried tweeting about this and everyone seemed to be a little confused, so instead of 140 characters I thought I&#x27;d try 7051." />
  <meta property="og:site_name" content="Phil Sturgeon" />
  <meta property="og:image" content="https://philsturgeon.uk/images/author.jpg" />
  <meta property="og:url" content="https://philsturgeon.uk/php/2013/03/23/pick-php-requirements-for-packages-responsibly/" />
  <meta property="og:locale" content="en_GB" />
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@philsturgeon">
  <meta name="twitter:title" content="Pick PHP Requirements for Packages Responsibly | Phil Sturgeon">
  <meta name="twitter:image:src" content="https://philsturgeon.uk/images/author.jpg">
  <meta name="twitter:url" content="https://philsturgeon.uk/php/2013/03/23/pick-php-requirements-for-packages-responsibly/">
  <meta name="twitter:description" content="Which version of PHP to use for anything is always much debated in the PHP community. I&#x27;m luck enough to have kissed sweet goodbye to PHP 5.2 a while back, but PHP 5.4 and PHP 5.3 are both actively used by different projects and recently I have come across a few packages that have been using PHP 5.4 almost exclusively just to use short array syntax, which to me is short sighted and selfish. I tried tweeting about this and everyone seemed to be a little confused, so instead of 140 characters I thought I&#x27;d try 7051.">
  <meta name="twitter:creator" content="@philsturgeon">
  
  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
</head>


  <body>

    <a class='fa fa-home logo-readium' href='/'></a>


    <!-- content start -->

    <main class="content" role="main">
      <article class="post">
        <div class="noarticleimage">
          <div class="post-meta">
            <h1 class="post-title">Pick PHP Requirements for Packages Responsibly</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/images/author.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person">Phil Sturgeon</h4>
              on
              <time datetime="2013-03-23 21:02:00 UTC">
                Mar 23 2013
              </time>
            </div>
          </div>
        </div>
        <br>
        <br>
        <br>
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p>I recently tweeted something which seems to have confused a lot of people:</p>

<blockquote class="twitter-tweet"><p>If you release PHP packages that require PHP 5.4 _JUST_ because you want to use short array syntax, then I hope your pet gets run over.</p>&mdash; Phil Sturgeon (@philsturgeon) <a href="https://twitter.com/philsturgeon/status/315475056203534338">March 23, 2013</a></blockquote>
<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>Now, don’t go running off to PETA, I’m clearing kidding about the pets, but people seemed confused by the main gist of this point: If you’re going to release a package (a Composer package for example) as PHP 5.4, then make sure it is worth it.</p>

<p>When I say “make sure it is worth it” I mean, <strong>don’t just switch your arrays from array() to [] just because it looks cool</strong>. That was the extent of my original tweet, because I’ve seen a few packages doing that and it annoyed me immensely. This conversation became confused quickly with people assuming that everyone on Composer is PHP 5.4 because only smart cool kids use Composer (which is weird, elitist, ignores those that use composer locally but deploy to PHP 5.3 servers and according to <a href="https://twitter.com/seldaek/status/315805955050848256">stats from Jordi</a> isn’t true anyway), other people started wanging on about how WordPress should move to PHP 5.3 which would make companies upgrade somehow (but that ignores the fact that PHP 5.4 packages would still be out of reach) and there were about 30 other conversations going on, all spawned out of the tweet which was making one very specific point…</p>

<p>Suffice it to say, if you require a user to upgrade their version of PHP simply so you can use some syntactical sugar inside a package that nobody else is even going to be looking at, then you’re an idiot. Beyond that, you’re actually hurting the community.</p>

<p>If every time a developer wants to use a package they’re forced to build their own because the developer of the original stupidly decided to use PHP 5.4 when <a href="http://w3techs.com/technologies/details/pl-php/5/all">only 3.1%</a> of the internet is using that version, then we’re doubling up on efforts to build useful, reusable components that we can all share.</p>

<h2 id="php-54-is-more-than-just-">PHP 5.4 is more than just []</h2>

<p>There are lots of brilliant new features in PHP 5.4 that could make a developer wish to pick PHP 5.4 over PHP 5.3 for a package they build.</p>

<p>Just look at the “New Features” change-log:</p>

<ul>
  <li>Support for traits has been added.</li>
  <li>Function array dereferencing has been added, e.g. foo()[0* ].</li>
  <li>Closures now support $this.</li>
  <li>Class member access on instantiation has been added, e.g.*  (new Foo)-&gt;bar().</li>
  <li>Class::{expr}() syntax is now supported.</li>
  <li>Binary number format has been added, e.g. 0b001001101.</li>
  <li>The session extension can now track the upload progress of files.</li>
</ul>

<p>Most of this is traits and dereferencing, which a lot of developers love. If you plan on making heavy use of features like this, such projects like  <a href="http://auraphp.github.com/">AuraPHP</a> then great, that’s a wonderful decision. We need people building components at the bleeding edge, and we need people building PHP 5.4 specific code that really shows people how to do it, but does the next package you release <em>need</em> to be PHP 5.4?</p>

<p>If you’re just using traits, then make sure those traits are optional. If you’re dereferencing then… well do you need to? It’s an extra line of code to avoid it, and instead of making your package compatible with only 3.1% of PHP-based websites you could make it work with over 50.4%. That is the entire point of sharing code right, to actually be able to share it with people?</p>

<h2 id="but-i-use-php-54-for-all-my-projects">“But I use PHP 5.4 for all my projects”</h2>

<p>Yes, you do, but think about <a href="/blog/2012/08/understanding-circumstance">other people</a> for a minute. At <a href="http://kaptu.re">Kapture</a> we use PHP 5.4 on any PHP-based application, and I already have a PHP 5.5 branch of the API ready to go and passing tests so that as soon as PHP 5.5.0 comes out I’ll be upgrading. I can do what I like, because I control the servers, but what about other people?</p>

<p>And not even other people, other projects?</p>

<p>PyroCMS for example, a few months back decided to up the requirements for the next version from PHP 5.2 to PHP 5.3. This might be seen as slow moving, but lets remember that WordPress won’t be upping the requirements until 2014 sometime.</p>

<p>It’s not just Pyro, another example would be Drupal 8 (based on Symfony2) who are in the same boat, as are <em>plenty</em> of other “distributed” projects.</p>

<p>If the amount of work it takes to keep your packages PHP 5.3 is minimal (long array syntax, keeping traits optional, and not using dereferencing) is that trivial, and it means that projects can use your packages, then surely it’s worth it? This avoids PHP 5.4 people and PHP 5.3 people all building the same shit, just because one group wants to use the new hotness, even though it doesn’t really add all that much.</p>

<p>Again, it’s about sharing it with the lowest common denominator which is the same logic that is being used by that vast majority of popular Composer packages or component-based frameworks which distribute over Composer:</p>

<ul>
  <li>Assetic</li>
  <li>AWS SDK 2</li>
  <li>Behat</li>
  <li>Buzz</li>
  <li>Doctrine</li>
  <li>Guzzle</li>
  <li>Laravel 4</li>
  <li>Monolog</li>
  <li>Imagine</li>
  <li>PPI</li>
  <li>Password Compatibility</li>
  <li>Pimple</li>
  <li>Swiftmailer</li>
  <li>Symfony2</li>
  <li>Twig</li>
  <li>ZF2</li>
</ul>

<p>All PHP 5.3, because PHP 5.4 usage is not high enough yet.</p>

<h2 id="so-why-not-php-52">So why not PHP 5.2</h2>

<p>If we’re going for the lowest common denominator, why not go for PHP 5.2?</p>

<p>PHP 5.2 and PHP 5.3 are worlds apart, whereas PHP 5.4 (syntactically) is just adding some sugar. Sure under the hood there are loads of speed improvements in PHP 5.4 and it’s an excellent version, but the architectural differences between 5.3 and 5.4 are trivial (or non-existent) compared to 5.2 and 5.3.</p>

<p>PHP 5.2 doesn’t have namespaces, closures, or late static binding. PHP 5.2 makes PSR-0 compatibility impossible, and that alone is a massive reason to ditch it for packages. Using PHP 5.2 blows chunks and it needs to be burned with fire, but PHP 5.4 doesn’t make enough of a difference <strong>to a package</strong> to really justify using it at this time.</p>

<h2 id="but-we-have-to-push-things-forward">“But we have to push things forward”</h2>

<p>Upping requirements of everything everywhere does not increase adoption of new PHP version support with hosting companies. Most hosting companies pay no attention to these things, and even when you beg and plead for them to upgrade they do it at their <a href="http://feedback.rackspace.com/forums/71021-product-feedback/suggestions/997049-php-5-3-support-in-cloud-sites">own damn rate anyway</a>. Some more alert companies like <a href="http://www.crucialwebhost.com/">Crucial Webhosting</a> have been rocking PHP 5.5 since the first alpha1, for people to <em>test</em> their code, but this is not because of people releasing PHP 5.5 code on packagist, this is due to PHP getting more consistent and regular with their releases and because they want to carve a name for themselves as being different from the average hosting company.</p>

<p>The whole idea that hosting companies care about what version we use for our components is just not realistic. When you say “well if I increase my packages people will have to upgrade to PHP 5.4 quicker.” you’re only kidding yourself. In reality those people just won’t bother looking at your package, especially if there is another one (all be it worse) next to yours.</p>

<h2 id="summary">Summary</h2>

<p>Running PHP 5.4 on your servers is going to make your code quicker and I can’t recommend it enough, but using PHP 5.4 specific syntax doesn’t change a thing. It makes some code a little cleaner, which most people wont ever see because its buried away in a package they wont bother looking at, and comes at the cost of drastically reducing adoption of your packages. In your applications you should use all the syntactical goodness that PHP 5.4 provides, just keep it out of your packages unless you need to. And if you think you need to, do you really <em>need</em> to?</p>

<p>As long as you understand that the usage will be much less and are ok with that (like Aura) then that’s fine, but don’t release some generic Geocode or OAuth 2 package as PHP 5.4 just because you prefer [] over array(). I don’t want to have to hurt any pets.</p>

          
        </section>
        <footer class="post-footer">
            <section class="share">
                  <a class="icon-twitter" href="https://twitter.com/share?text=Pick PHP Requirements for Packages Responsibly&amp;url=https://philsturgeon.uk/php/2013/03/23/pick-php-requirements-for-packages-responsibly/"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                  <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                  </a>
                  <a class="icon-facebook" href="https://www.facebook.com/sharer.php?t=Pick PHP Requirements for Packages Responsibly&amp;u=https://philsturgeon.uk/php/2013/03/23/pick-php-requirements-for-packages-responsibly/"
                    onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
                  <i class="fa fa-facebook"></i><span class="hidden">facebook</span>
                  </a>
            </section>
            <section class="post-next-previous">
                <p>
                    Previous:
                    <a class="button" href="/php/2013/03/22/help-test-php-55-beta1/">Help test PHP 5.5 beta1</a>
                </p>
                <p style="float:right">
                    Next: 
                    <a class="button" href="/php/2013/04/01/psr2-the-tough-decision/">PSR-2: The Tough Decision</a>
                </p>
            </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="more isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/images/author.jpg)">Blog Logo</div>
              <h4>Phil Sturgeon</h4>
              <p class="bio">I spend a lot of time urging people to learn more languages, and if that is a bit much learn another framework. Rails and Laravel are the same, and Go is a barrel of laughs.</p>
              <p>Get out of your rut.</p>
            </section>
          </div>
          <div class="more isRight">
            <h5 class="index-headline featured"><span>More Writing</span></h5>
            <section class="author">
              <a href="http://apisyouwonthate.com/">
                <div class="book-image build-apis">Book Cover</div>
                <h4>Build APIs You Won't Hate</h4>
              </a>
              <p class="bio">Everyone and their dog wants an API, so you should probably learn how to build them.</p>
              <p><a href="http://apisyouwonthate.com/">Buy it from LeanPub or Amazon</a>.</p>
            </section>
          </div>
        </div>
      </article>

      <div id="disqus_thread"></div>
      <script type="text/javascript">
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'philsturgeon';

          var disqus_identifier = 'pick-php-requirements-for-packages-responsibly';

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </main>
    <div class="bottom-closer">
      <div class="background-closer-image" style="background-image: url(/images/ciderphpants.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Phil Sturgeon</h1>
        <h2 class="blog-description">I used to contribute to the PHP-FIG, The League of Extraordinary Packages, PHP The Right Way, CodeIgniter, FuelPHP, PyroCMS and a bunch of other stuff, but I gave it all up to join the circus</h2>
        <a href="/" class="btn">Back to Overview</a>
      </div>
    </div>

    <!-- content end -->

    <footer class='footer' role='contentinfo'>
  <div class='footer-links'>
    <ul class='context'>
      <li>
        <h3>Content</h3>
      </li>
      <li>
        <a href='/about'>About</a>
      </li>
      <li>
        <a href='/books'>Books</a>
      </li>
    </ul>
    <ul class='follow'>
      <li>
        <h3>Follow Me</h3>
      </li>
      <li>
        <a href='https://twitter.com/philsturgeon'>Twitter</a>
      </li>
      <li>
        <a href='https://github.com/'>GitHub</a>
      </li>
      <li>
        <a href='http://phptownhall.com/'>PHP Town Hall</a>
      </li>
    </ul>
    <ul class='recent_posts'>
      <li>
        <h3>Recent Posts</h3>
        <ul>
          <li><a href="/2016/01/04/http-rest-api-file-uploads/">HTTP/REST API File Uploads</a></li>
          <li><a href="/2015/11/20/deploying-with-git-flow-tags-and-circleci/">Deploying with Git-Flow, Tags and CircleCI</a></li>
          <li><a href="/api/2015/10/08/http-documentation-with-api-blueprint/">HTTP Documentation with API Blueprint</a></li>
        </ul>
      </li>
    </ul>
  </div>
</footer>

    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="/javascripts/jquery.fitvids.js"></script>
<script src="/javascripts/index.js"></script>
<script src="/javascripts/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    $window.on('scroll', function() {
      var top = $window.scrollTop();

      if (top < 0 || top > 1500) { return; }
      $image
        .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
        .css('opacity', 1-Math.max(top/700, 0));
    });
    $window.trigger('scroll');

    var height = $('.article-image').height();
    $('.post-content').css('padding-top', height + 'px');

    $('a[href*=#]:not([href=#])').click(function() {
      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
       && location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
        if (target.length) {
          $('html,body').animate({ scrollTop: target.offset().top }, 500);
          return false;
        }
      }
    });
  });
}(jQuery));
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-8523256-1', 'auto');
  ga('send', 'pageview');

</script>


  </body>

</html>
