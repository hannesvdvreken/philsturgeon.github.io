<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>FUD Cracker: PHP 5.5 never lost JSON support | Phil Sturgeon</title>
  <meta name="description" content="I used to contribute to the PHP-FIG, The League of Extraordinary Packages, PHP The Right Way, CodeIgniter, FuelPHP, PyroCMS and a bunch of other stuff, but I gave it all up to join the circus" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link href="/stylesheets/main.css" rel="stylesheet" media="screen" />
  <link href="/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href="/images/favicon.png" rel="icon" type="image/png" />

  <meta property="og:title" content="FUD Cracker: PHP 5.5 never lost JSON support" />
  <meta property="og:type" content="article" />
  <meta property="article:author" content="Phil Sturgeon" />
  <meta property="og:description" content="I&#x27;m posting this because I have accidentally been perpetuating some FUD, that PHP 5.5 has had its JSON support removed. It hasn&#x27;t. This article is an apology for my involvement in any confusion and an explanation of what actually happened." />
  <meta property="og:site_name" content="Phil Sturgeon" />
  <meta property="og:image" content="https://philsturgeon.uk/images/author.jpg" />
  <meta property="og:url" content="https://philsturgeon.uk/php/2013/08/21/fud-cracker-php-55-never-lost-json-support/" />
  <meta property="og:locale" content="en_GB" />
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@philsturgeon">
  <meta name="twitter:title" content="FUD Cracker: PHP 5.5 never lost JSON support | Phil Sturgeon">
  <meta name="twitter:image:src" content="https://philsturgeon.uk/images/author.jpg">
  <meta name="twitter:url" content="https://philsturgeon.uk/php/2013/08/21/fud-cracker-php-55-never-lost-json-support/">
  <meta name="twitter:description" content="I&#x27;m posting this because I have accidentally been perpetuating some FUD, that PHP 5.5 has had its JSON support removed. It hasn&#x27;t. This article is an apology for my involvement in any confusion and an explanation of what actually happened.">
  <meta name="twitter:creator" content="@philsturgeon">
  
  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
</head>


  <body>

    <a class='fa fa-home logo-readium' href='/'></a>


    <!-- content start -->

    <main class="content" role="main">
      <article class="post">
        <div class="noarticleimage">
          <div class="post-meta">
            <h1 class="post-title">FUD Cracker: PHP 5.5 never lost JSON support</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/images/author.jpg)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person">Phil Sturgeon</h4>
              on
              <time datetime="2013-08-21 11:50:00 UTC">
                Aug 21 2013
              </time>
            </div>
          </div>
        </div>
        <br>
        <br>
        <br>
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p>I’m posting this because I have accidentally been perpetuating some FUD, that PHP 5.5 has had its JSON support removed. <strong>It hasn’t</strong>.</p>

<blockquote class="twitter-tweet"><p>If anyone tells you that PHP 5.5 dropped JSON support, that&#39;s wrong. JSON support is there as always (just maybe with a different impl)</p>&mdash; Nikita Popov (@nikita_ppv) <a href="https://twitter.com/nikita_ppv/statuses/370144778781868033">August 21, 2013</a></blockquote>
<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>Some Linux distros are simply choosing to switch from the default ext to using <a href="https://github.com/remicollet/pecl-json-c">this one</a>. MAYBE PHP itself will switch sometime, who knows.</p>

<p>Let me explain my previous confusion.</p>

<p>The other day I was upgrading some Ubuntu servers to PHP 5.5 via the <a href="https://launchpad.net/~ondrej/+archive/php5">Ondřej Surý PPA</a>. Chef ran and did it’s thing and everything seemed great until I tried running my tests. Everything was red.</p>

<blockquote>
  <p>PHP Fatal error:  Call to undefined function Illuminate\Support\json_encode() on line ….</p>
</blockquote>

<p>What the shit? I’ve not seen that since accidentally running PHP 5.2.x code on a PHP 5.1.x server a bunch of years ago, but this is in a namespace too so it can’t be that.</p>

<p>Googling around got me to PHP <a href="https://bugs.php.net/bug.php?id=63520">bug report #63520</a>. In there we see a bunch of smart folk discussing that things might need to be removed or changed due to licenses and politics, but no concrete action is listed at the bottom as to what happened, and it was a few days ago.</p>

<p>I ended up fucking around in the CLI for a while and eventually purged PHP and all of its packages after noticing my php5-dev was still 5.4.x-based. After reinstalling php5-dev my worries were gone, json_encode() worked again.</p>

<p>It was at this point I made a silly assumption. I figured Ondřej had just enabled the new extension by default (which it turns out he did) but other distros were still without, which was seemingly confirmed by a blog post called “<a href="http://iteration99.com/2013/php-json-removed-from-php-5-5/">PHP JSON removed in PHP 5.5</a>”. <em>It changed its name while writing this and seems to have made a few edits, but it definitely gives off the idea that PHP had actually removed JSON and was waiting for a replacement to go in.</em></p>

<p>Whatever, I made a silly tweet about it and got on with my day:</p>

<blockquote class="twitter-tweet"><p>Upgrading PHP 5.4 to 5.5 takes almost no time; Well... except for this little nugget of lunacy: <a href="http://t.co/oiEZru7Rbf">http://t.co/oiEZru7Rbf</a> <a href="https://twitter.com/search?q=%23phpdrama&amp;src=hash">#phpdrama</a></p>&mdash; Phil Sturgeon (@philsturgeon) <a href="https://twitter.com/philsturgeon/statuses/369535062233997314">August 19, 2013</a></blockquote>
<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>It was funny and all but it is of course completely wrong. Since then the link has been up on Reddit and it was so wrong one of the moderators took the article off the front-page, which VERY rarely happens. Then it was reposted, but this time <a href="https://twitter.com/nikita_ppv">Nikita Popov</a> was around to <a href="http://www.reddit.com/r/PHP/comments/1ksnzw/php_json_removed_in_php_55/cbs7kfo">explain</a>.</p>

<h2 id="what-actually-happened">What Actually Happened</h2>

<p><a href="https://github.com/php/php-src/tree/master/ext/json">ext/json</a> is still in master, so php source has not changed.</p>

<p>Debian removed the original ext/json from their distribution (as detailed in this <a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=692613">Debian bug report</a>), and have bundled a feature-complete <a href="https://github.com/remicollet/pecl-json-c">replacement extension</a> into their distro. It seems like the package dependencies might have been a little different (maybe just in the PPA I was using) as somehow my upgrade got me PHP 5.5, but it didn’t get me the new ext. As I said removing php5-dev and putting it back again seemed to do the trick, so fuck knows what was going on there.</p>

<p>Put simply, upgrading should be fine. Here are the options while upgrading:</p>

<ul>
  <li><strong>Source users:</strong> Compile from updated source and you’ll have no problems.</li>
  <li><strong>Non-Debian/Fedora-based users:</strong> Your package manager will update you with no issue at all.</li>
  <li><strong>Debian/Fedora-based users:</strong> Your package manager will <em>probably</em> update you with no issue at all. If you get into trouble, purge and install php fresh.</li>
</ul>

<p>So it looks like I was only having problems because I was using an unstable PPA which had upgraded to PHP 5.5.2 and removed the core ext, putting the new ext in a different package. I had a problem, Googled it and had my fears backed up by a blog article which was not entirely accurate.</p>

<p>Here is a <a href="https://liorkaplan.wordpress.com/2013/06/01/bye-bye-non-free-php-json-extension/">better blog post</a> covering what happened, posted in <em>June</em>. Sadly it wasn’t that one everyone started linking to (myself included).</p>

<p>So, sorry for any tweets or Reddit comments you saw from me. The whole time I was saying it was silly politics and a non-issue for PHP developers as even if the ext WAS missing, if you’re installing PHP 5.5 on your server you can obviously install a PECL. BUT, luckily, you don’t have to.</p>

<p>PHP 5.5 works amazingly. Use it. I am.</p>

<p>P.S: This.</p>

<blockquote class="twitter-tweet"><p><a href="https://twitter.com/mwop">@mwop</a> <a href="https://twitter.com/philsturgeon">@philsturgeon</a> <a href="https://twitter.com/rdohms">@rdohms</a> Can we finally use this as a rationale to push people away from distro supported releases? So ridiculous...</p>&mdash; Anthony Ferrara (@ircmaxell) <a href="https://twitter.com/ircmaxell/statuses/370160913854103552">August 21, 2013</a></blockquote>
<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script>


        </section>
        <footer class="post-footer">
            <section class="share">
                  <a class="icon-twitter" href="https://twitter.com/share?text=FUD Cracker: PHP 5.5 never lost JSON support&amp;url=https://philsturgeon.uk/php/2013/08/21/fud-cracker-php-55-never-lost-json-support/"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                  <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                  </a>
                  <a class="icon-facebook" href="https://www.facebook.com/sharer.php?t=FUD Cracker: PHP 5.5 never lost JSON support&amp;u=https://philsturgeon.uk/php/2013/08/21/fud-cracker-php-55-never-lost-json-support/"
                    onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
                  <i class="fa fa-facebook"></i><span class="hidden">facebook</span>
                  </a>
            </section>
            <section class="post-next-previous">
                <p>
                    Previous:
                    <a class="button" href="/php/2013/08/20/php-static-analysis-in-sublime-text/">PHP Static Analysis in Sublime Text</a>
                </p>
                <p style="float:right">
                    Next: 
                    <a class="button" href="/php/2013/08/29/curlfile-and-the-facebook-sdk-in-php-55/">CurlFile and the Facebook SDK in PHP 5.5</a>
                </p>
            </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="more isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/images/author.jpg)">Blog Logo</div>
              <h4>Phil Sturgeon</h4>
              <p class="bio">I spend a lot of time urging people to learn more languages, and if that is a bit much learn another framework. Rails and Laravel are the same, and Go is a barrel of laughs.</p>
              <p>Get out of your rut.</p>
            </section>
          </div>
          <div class="more isRight">
            <h5 class="index-headline featured"><span>More Writing</span></h5>
            <section class="author">
              <a href="http://apisyouwonthate.com/">
                <div class="book-image build-apis">Book Cover</div>
                <h4>Build APIs You Won't Hate</h4>
              </a>
              <p class="bio">Everyone and their dog wants an API, so you should probably learn how to build them.</p>
              <p><a href="http://apisyouwonthate.com/">Buy it from LeanPub or Amazon</a>.</p>
            </section>
          </div>
        </div>
      </article>

      <div id="disqus_thread"></div>
      <script type="text/javascript">
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'philsturgeon';

          var disqus_identifier = 'fud-cracker-php-55-never-lost-json-support';

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </main>
    <div class="bottom-closer">
      <div class="background-closer-image" style="background-image: url(/images/ciderphpants.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Phil Sturgeon</h1>
        <h2 class="blog-description">I used to contribute to the PHP-FIG, The League of Extraordinary Packages, PHP The Right Way, CodeIgniter, FuelPHP, PyroCMS and a bunch of other stuff, but I gave it all up to join the circus</h2>
        <a href="/" class="btn">Back to Overview</a>
      </div>
    </div>

    <!-- content end -->

    <footer class='footer' role='contentinfo'>
  <div class='footer-links'>
    <ul class='context'>
      <li>
        <h3>Content</h3>
      </li>
      <li>
        <a href='/about'>About</a>
      </li>
      <li>
        <a href='/books'>Books</a>
      </li>
    </ul>
    <ul class='follow'>
      <li>
        <h3>Follow Me</h3>
      </li>
      <li>
        <a href='https://twitter.com/philsturgeon'>Twitter</a>
      </li>
      <li>
        <a href='https://github.com/'>GitHub</a>
      </li>
      <li>
        <a href='http://phptownhall.com/'>PHP Town Hall</a>
      </li>
    </ul>
    <ul class='recent_posts'>
      <li>
        <h3>Recent Posts</h3>
        <ul>
          <li><a href="/2015/10/02/everyones-favourite-twitter-character/">Everyones Favourite Twitter Characters</a></li>
          <li><a href="/http/2015/09/23/http-status-codes-are-not-enough/">HTTP Status Codes Are Not Enough</a></li>
          <li><a href="/http/2015/09/03/auto-incrementing-to-destruction/">Auto-Incrementing IDs: Giving your Data Away</a></li>
        </ul>
      </li>
    </ul>
  </div>
</footer>

    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="/javascripts/jquery.fitvids.js"></script>
<script src="/javascripts/index.js"></script>
<script src="/javascripts/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    $window.on('scroll', function() {
      var top = $window.scrollTop();

      if (top < 0 || top > 1500) { return; }
      $image
        .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
        .css('opacity', 1-Math.max(top/700, 0));
    });
    $window.trigger('scroll');

    var height = $('.article-image').height();
    $('.post-content').css('padding-top', height + 'px');

    $('a[href*=#]:not([href=#])').click(function() {
      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
       && location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
        if (target.length) {
          $('html,body').animate({ scrollTop: target.offset().top }, 500);
          return false;
        }
      }
    });
  });
}(jQuery));
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-8523256-1', 'auto');
  ga('send', 'pageview');

</script>


  </body>

</html>
